<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Reset Password</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body class="theme-teal">
  <div class="auth-shell">
    <section class="auth-card" aria-labelledby="rp-title">
      <h1 id="rp-title">Set a new password</h1>
      <p>Enter and confirm your new password.</p>

      <form action="login.html" method="get" novalidate aria-labelledby="rp-title">
        <label for="newPassword">New password</label>
        <div class="password-row">
          <input id="newPassword" name="newPassword" type="password" autocomplete="new-password" required aria-describedby="passwordRules">
          <button type="button" class="btn" id="toggleNew" aria-pressed="false" aria-controls="newPassword">Show</button>
        </div>
        <small id="passwordRules" class="sr-only">Use at least 8 characters for this prototype.</small>

        <label for="confirmPassword">Confirm password</label>
        <div class="password-row">
          <input id="confirmPassword" name="confirmPassword" type="password" autocomplete="new-password" required aria-describedby="confirmHelp">
          <button type="button" class="btn" id="toggleConfirm" aria-pressed="false" aria-controls="confirmPassword">Show</button>
        </div>
        <small id="confirmHelp" class="sr-only">Must match the new password.</small>

        <div class="actions">
          <button class="primary" id="resetSubmit" type="submit" disabled aria-label="Reset password (mock)">Reset password</button>
          <a href="login.html" class="btn" aria-label="Back to login">Back to login</a>
        </div>
      </form>

      <div id="rp-messages" class="sr-only" aria-live="polite"></div>
    </section>
  </div>
  <script>
    const newPw = document.getElementById('newPassword');
    const confPw = document.getElementById('confirmPassword');
    const submitBtn = document.getElementById('resetSubmit');
    const msg = document.getElementById('rp-messages');
    const tNew = document.getElementById('toggleNew');
    const tConf = document.getElementById('toggleConfirm');

    function syncValidity() {
      const bothFilled = newPw.value.length > 0 && confPw.value.length > 0;
      const matches = newPw.value === confPw.value;
      confPw.setAttribute('aria-invalid', bothFilled && !matches ? 'true' : 'false');
      submitBtn.disabled = !(bothFilled && matches);
      if (msg) {
        msg.textContent = bothFilled && !matches ? 'Passwords do not match.' : '';
      }
    }

    newPw.addEventListener('input', syncValidity);
    confPw.addEventListener('input', syncValidity);

    function toggle(el, btn) {
      if (el.type === 'password') {
        el.type = 'text';
        btn.textContent = 'Hide';
        btn.setAttribute('aria-pressed', 'true');
      } else {
        el.type = 'password';
        btn.textContent = 'Show';
        btn.setAttribute('aria-pressed', 'false');
      }
    }

    tNew.addEventListener('click', () => toggle(newPw, tNew));
    tConf.addEventListener('click', () => toggle(confPw, tConf));
  </script>
</body>
</html>
